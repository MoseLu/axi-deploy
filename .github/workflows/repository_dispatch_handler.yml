name: Repository Dispatch Handler

on:
  repository_dispatch:
    types: [deploy]

jobs:
  handle-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: 处理部署请求
        run: |
          echo "📋 收到部署请求:"
          echo "- 项目: ${{ github.event.client_payload.project }}"
          echo "- 部署路径: ${{ github.event.client_payload.deploy_path }}"
          echo "- 源仓库: ${{ github.event.client_payload.source_repo }}"
          echo "- 构建ID: ${{ github.event.client_payload.run_id }}"
          echo "- 部署类型: ${{ github.event.client_payload.deploy_type || 'static' }}"
          
          # 这里可以添加额外的处理逻辑
          echo "✅ 部署请求已处理"
          
          # 记录部署请求到日志
          echo "📝 部署日志:"
          echo "时间: $(date)"
          echo "项目: ${{ github.event.client_payload.project }}"
          echo "仓库: ${{ github.event.client_payload.source_repo }}"
          echo "构建ID: ${{ github.event.client_payload.run_id }}"
          echo "部署类型: ${{ github.event.client_payload.deploy_type || 'static' }}"
          
          echo "💡 提示: 请手动触发 Universal Deploy 工作流进行实际部署" 