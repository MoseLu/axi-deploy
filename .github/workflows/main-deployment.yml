name: Main Deployment

description: "ä¸»éƒ¨ç½²å·¥ä½œæµ - æ•´ä¸ªéƒ¨ç½²æµç¨‹çš„å…¥å£ç‚¹"

on:
  workflow_dispatch:
    inputs:
      project:
        description: 'é¡¹ç›®åç§°'
        required: true
        type: string
      source_repo:
        description: 'æºä»“åº“ (æ ¼å¼: owner/repo)'
        required: true
        type: string
      run_id:
        description: 'æ„å»ºè¿è¡ŒID'
        required: true
        type: string
      deploy_type:
        description: 'éƒ¨ç½²ç±»å‹'
        required: true
        default: 'static'
        type: choice
        options:
          - static
          - backend
      nginx_config:
        description: 'Nginxé…ç½®ï¼ˆå¯é€‰ï¼‰'
        required: false
        type: string
      start_cmd:
        description: 'å¯åŠ¨å‘½ä»¤ï¼ˆåç«¯é¡¹ç›®ï¼‰'
        required: false
        type: string
      server_host:
        description: 'æœåŠ¡å™¨åœ°å€'
        required: true
        type: string
      server_user:
        description: 'æœåŠ¡å™¨ç”¨æˆ·'
        required: true
        type: string
      server_key:
        description: 'æœåŠ¡å™¨å¯†é’¥'
        required: true
        type: string
      server_port:
        description: 'æœåŠ¡å™¨ç«¯å£'
        required: true
        type: string

jobs:
  download-artifact:
    runs-on: ubuntu-latest
    outputs:
      artifact_path: ${{ steps.set-outputs.outputs.artifact_path }}
      artifact_size: ${{ steps.set-outputs.outputs.artifact_size }}
    
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: ä¸‹è½½æ„å»ºäº§ç‰©
        id: download
        uses: dawidd6/action-download-artifact@v2
        with:
          name: dist-${{ inputs.project }}
          path: ./
          repo: ${{ inputs.source_repo }}
          workflow: ${{ inputs.project }}_deploy.yml
          run_id: ${{ inputs.run_id }}
          github_token: ${{ secrets.GITHUB_TOKEN }}

      - name: éªŒè¯æ„å»ºäº§ç‰©
        run: |
          echo "ğŸ” éªŒè¯æ„å»ºäº§ç‰©..."
          
          # æ£€æŸ¥å¯èƒ½çš„æ„å»ºäº§ç‰©ç›®å½•
          if [ -d "./dist" ]; then
            ARTIFACT_DIR="./dist"
          elif [ -d "./dist-${{ inputs.project }}" ]; then
            ARTIFACT_DIR="./dist-${{ inputs.project }}"
          else
            # æ„å»ºäº§ç‰©ç›´æ¥åœ¨å½“å‰ç›®å½•
            ARTIFACT_DIR="."
            echo "ğŸ“ æ„å»ºäº§ç‰©ç›´æ¥åœ¨å½“å‰ç›®å½•"
          fi
          
          echo "ğŸ“ æ„å»ºäº§ç‰©ç›®å½•: $ARTIFACT_DIR"
          echo "ğŸ“ æ„å»ºäº§ç‰©ç›®å½•å†…å®¹:"
          ls -la "$ARTIFACT_DIR/"
          
          # æ£€æŸ¥æ˜¯å¦æœ‰æ–‡ä»¶
          FILE_COUNT=$(find "$ARTIFACT_DIR" -type f | wc -l)
          if [ "$FILE_COUNT" -eq 0 ]; then
            echo "âŒ æ„å»ºäº§ç‰©ç›®å½•ä¸ºç©º"
            exit 1
          fi
          
          echo "âœ… æ„å»ºäº§ç‰©éªŒè¯é€šè¿‡"
          echo "ğŸ“Š æ–‡ä»¶æ•°é‡: $FILE_COUNT"

      - name: è®¾ç½®è¾“å‡º
        id: set-outputs
        run: |
          # ç¡®å®šæ„å»ºäº§ç‰©è·¯å¾„
          if [ -d "./dist" ]; then
            ARTIFACT_PATH="./dist"
          elif [ -d "./dist-${{ inputs.project }}" ]; then
            ARTIFACT_PATH="./dist-${{ inputs.project }}"
          else
            # æ„å»ºäº§ç‰©ç›´æ¥åœ¨å½“å‰ç›®å½•
            ARTIFACT_PATH="."
          fi
          
          echo "artifact_path=$ARTIFACT_PATH" >> $GITHUB_OUTPUT
          echo "artifact_size=$(du -sb $ARTIFACT_PATH | cut -f1)" >> $GITHUB_OUTPUT
          echo "âœ… è¾“å‡ºå·²è®¾ç½®"
          echo "æ„å»ºäº§ç‰©è·¯å¾„: $ARTIFACT_PATH"

  upload-files:
    needs: download-artifact
    runs-on: ubuntu-latest
    outputs:
      upload_success: ${{ steps.set-outputs.outputs.upload_success }}
      temp_dir: ${{ steps.set-outputs.outputs.temp_dir }}
    
    steps:
      - name: åˆ›å»ºä¸´æ—¶ç›®å½•å¹¶ä¸Šä¼ æ–‡ä»¶
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ inputs.server_host }}
          username: ${{ inputs.server_user }}
          key: ${{ inputs.server_key }}
          port: ${{ inputs.server_port }}
          script: |
            echo "ğŸ“¤ ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨..."
            
            PROJECT="${{ inputs.project }}"
            RUN_USER="deploy"
            
            # åˆ›å»ºä¸´æ—¶ç›®å½•
            TEMP_DIR="/tmp/deploy-$PROJECT"
            echo "ğŸ“ åˆ›å»ºä¸´æ—¶ç›®å½•: $TEMP_DIR"
            sudo mkdir -p "$TEMP_DIR"
            sudo chown $RUN_USER:$RUN_USER "$TEMP_DIR"
            
            echo "âœ… ä¸´æ—¶ç›®å½•å·²åˆ›å»º: $TEMP_DIR"

      - name: è°ƒè¯•æ„å»ºäº§ç‰©è·¯å¾„
        run: |
          echo "ğŸ” è°ƒè¯•æ„å»ºäº§ç‰©è·¯å¾„..."
          echo "å½“å‰å·¥ä½œç›®å½•: $(pwd)"
          echo "æ„å»ºäº§ç‰©è·¯å¾„: ${{ needs.download-artifact.outputs.artifact_path }}"
          echo "æ„å»ºäº§ç‰©å¤§å°: ${{ needs.download-artifact.outputs.artifact_size }}"
          
          echo "ğŸ“ å½“å‰ç›®å½•å†…å®¹:"
          ls -la ./
          
          echo "ğŸ“ æ„å»ºäº§ç‰©ç›®å½•å†…å®¹:"
          if [ -d "${{ needs.download-artifact.outputs.artifact_path }}" ]; then
            ls -la "${{ needs.download-artifact.outputs.artifact_path }}/"
            echo "ğŸ“Š æ–‡ä»¶ç»Ÿè®¡:"
            find "${{ needs.download-artifact.outputs.artifact_path }}" -type f | wc -l
          else
            echo "âŒ æ„å»ºäº§ç‰©ç›®å½•ä¸å­˜åœ¨: ${{ needs.download-artifact.outputs.artifact_path }}"
          fi

      - name: ä¸Šä¼ æ„å»ºäº§ç‰©
        uses: appleboy/scp-action@v0.1.7
        with:
          host: ${{ inputs.server_host }}
          username: ${{ inputs.server_user }}
          key: ${{ inputs.server_key }}
          port: ${{ inputs.server_port }}
          source: "${{ github.workspace }}/${{ needs.download-artifact.outputs.artifact_path }}"
          target: "/tmp/deploy-${{ inputs.project }}/"

      - name: è®¾ç½®è¾“å‡º
        id: set-outputs
        run: |
          echo "upload_success=true" >> $GITHUB_OUTPUT
          echo "temp_dir=/tmp/deploy-${{ inputs.project }}" >> $GITHUB_OUTPUT
          echo "âœ… ä¸Šä¼ å®Œæˆ"

  deploy-project:
    needs: upload-files
    runs-on: ubuntu-latest
    outputs:
      deploy_success: ${{ steps.set-outputs.outputs.deploy_success }}
      deploy_path: ${{ steps.set-outputs.outputs.deploy_path }}
    
    steps:
      - name: éƒ¨ç½²é¡¹ç›®
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ inputs.server_host }}
          username: ${{ inputs.server_user }}
          key: ${{ inputs.server_key }}
          port: ${{ inputs.server_port }}
          script: |
            echo "ğŸš€ éƒ¨ç½²é¡¹ç›®..."
            
            PROJECT="${{ inputs.project }}"
            DEPLOY_TYPE="${{ inputs.deploy_type }}"
            RUN_USER="deploy"
            APPS_ROOT="/srv/apps"
            STATIC_ROOT="/srv/static"
            BACKUP_ROOT="/srv/backups"
            TEMP_DIR="/tmp/deploy-$PROJECT"
            
            # ç¡®å®šéƒ¨ç½²è·¯å¾„
            if [ "$DEPLOY_TYPE" = "backend" ]; then
              DEPLOY_PATH="$APPS_ROOT/$PROJECT"
            else
              DEPLOY_PATH="$STATIC_ROOT/$PROJECT"
            fi
            
            echo "ğŸ“ éƒ¨ç½²è·¯å¾„: $DEPLOY_PATH"
            
            # å¤‡ä»½ç°æœ‰éƒ¨ç½²
            if [ -d "$DEPLOY_PATH" ]; then
              echo "ğŸ“‹ å¤‡ä»½ç°æœ‰éƒ¨ç½²..."
              BACKUP_PATH="$BACKUP_ROOT/$PROJECT/backup-$(date +%Y%m%d_%H%M%S)"
              sudo mkdir -p "$BACKUP_PATH"
              sudo cp -r "$DEPLOY_PATH" "$BACKUP_PATH/"
              echo "âœ… å¤‡ä»½å®Œæˆ: $BACKUP_PATH"
            fi
            
            # éƒ¨ç½²æ–°æ–‡ä»¶
            echo "ğŸ“¦ éƒ¨ç½²æ–°æ–‡ä»¶..."
            sudo mkdir -p "$(dirname $DEPLOY_PATH)"
            sudo rm -rf "$DEPLOY_PATH"
            sudo mv "$TEMP_DIR" "$DEPLOY_PATH"
            sudo chown -R $RUN_USER:$RUN_USER "$DEPLOY_PATH"
            
            echo "âœ… éƒ¨ç½²å®Œæˆ"

      - name: è®¾ç½®è¾“å‡º
        id: set-outputs
        run: |
          echo "deploy_success=true" >> $GITHUB_OUTPUT
          echo "deploy_path=/srv/${{ inputs.deploy_type == 'backend' && 'apps' || 'static' }}/${{ inputs.project }}" >> $GITHUB_OUTPUT
          echo "âœ… éƒ¨ç½²å®Œæˆ"

  configure-nginx:
    needs: deploy-project
    runs-on: ubuntu-latest
    outputs:
      config_success: ${{ steps.set-outputs.outputs.config_success }}
    
    steps:
      - name: é…ç½®Nginx
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ inputs.server_host }}
          username: ${{ inputs.server_user }}
          key: ${{ inputs.server_key }}
          port: ${{ inputs.server_port }}
          script: |
            echo "ğŸ”§ é…ç½®Nginx..."
            
            PROJECT="${{ inputs.project }}"
            DEPLOY_TYPE="${{ inputs.deploy_type }}"
            NGINX_CONF_DIR="/www/server/nginx/conf/conf.d/redamancy"
            
            echo "ğŸ“‹ é…ç½®ä¿¡æ¯:"
            echo "- é¡¹ç›®: $PROJECT"
            echo "- éƒ¨ç½²ç±»å‹: $DEPLOY_TYPE"
            echo "- é…ç½®ç›®å½•: $NGINX_CONF_DIR"
            
            # æ£€æŸ¥é…ç½®ç›®å½•æ˜¯å¦å­˜åœ¨
            if [ ! -d "$NGINX_CONF_DIR" ]; then
              echo "âŒ Nginxé…ç½®ç›®å½•ä¸å­˜åœ¨: $NGINX_CONF_DIR"
              echo "ğŸ“ åˆ›å»ºé…ç½®ç›®å½•..."
              sudo mkdir -p "$NGINX_CONF_DIR"
            fi
            
            # ç”Ÿæˆé¡¹ç›®è·¯ç”±é…ç½®
            ROUTE_CONF="$NGINX_CONF_DIR/route-$PROJECT.conf"
            echo "ğŸ“ é…ç½®æ–‡ä»¶è·¯å¾„: $ROUTE_CONF"
            
            # æ˜¾ç¤ºå½“å‰é…ç½®æ–‡ä»¶å†…å®¹
            if [ -f "$ROUTE_CONF" ]; then
              echo "ğŸ“„ å½“å‰é…ç½®æ–‡ä»¶å†…å®¹:"
              cat "$ROUTE_CONF"
            else
              echo "ğŸ“„ é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºæ–°æ–‡ä»¶"
            fi
            
            # å¤‡ä»½æ—§é…ç½® - ä½¿ç”¨é¡¹ç›®ä¸“ç”¨å¤‡ä»½ç›®å½•ï¼Œæœ€å¤šä¿ç•™2ä¸ªå¤‡ä»½
            if [ -f "$ROUTE_CONF" ]; then
              # åˆ›å»ºé¡¹ç›®ä¸“ç”¨å¤‡ä»½ç›®å½•
              PROJECT_BACKUP_DIR="$NGINX_CONF_DIR/backups/$PROJECT"
              sudo mkdir -p "$PROJECT_BACKUP_DIR"
              
              # å¤‡ä»½æ—§é…ç½®
              BACKUP_FILE="$PROJECT_BACKUP_DIR/route-$PROJECT.conf.backup.$(date +%Y%m%d_%H%M%S)"
              sudo cp "$ROUTE_CONF" "$BACKUP_FILE"
              sudo rm -f "$ROUTE_CONF"
              echo "âœ… æ—§é…ç½®å·²å¤‡ä»½åˆ°: $BACKUP_FILE"
              
              # æ¸…ç†æ—§çš„å¤‡ä»½æ–‡ä»¶ï¼Œåªä¿ç•™æœ€è¿‘2ä¸ª
              echo "ğŸ§¹ æ¸…ç†æ—§çš„å¤‡ä»½æ–‡ä»¶..."
              BACKUP_FILES=$(ls -t "$PROJECT_BACKUP_DIR"/route-$PROJECT.conf.backup.* 2>/dev/null | tail -n +3)
              if [ -n "$BACKUP_FILES" ]; then
                echo "ğŸ—‘ï¸ åˆ é™¤æ—§çš„å¤‡ä»½æ–‡ä»¶:"
                echo "$BACKUP_FILES" | xargs -r sudo rm -f
                echo "âœ… æ—§å¤‡ä»½æ–‡ä»¶å·²æ¸…ç†ï¼Œä¿ç•™æœ€è¿‘2ä¸ªå¤‡ä»½"
              else
                echo "ğŸ“‹ æ²¡æœ‰éœ€è¦æ¸…ç†çš„æ—§å¤‡ä»½æ–‡ä»¶"
              fi
            fi
            
            # ç”Ÿæˆé»˜è®¤Nginxé…ç½®
            if [ "$DEPLOY_TYPE" = "backend" ]; then
              # åç«¯é¡¹ç›®é…ç½®
              NGINX_CONFIG="
              location /docs/ {
                  proxy_pass http://localhost:8080/;
                  proxy_set_header Host \$host;
                  proxy_set_header X-Real-IP \$remote_addr;
                  proxy_set_header X-Forwarded-For \$proxy_add_x_forwarded_for;
                  proxy_set_header X-Forwarded-Proto \$scheme;
              }"
            else
              # é™æ€é¡¹ç›®é…ç½® - ä½¿ç”¨aliasè€Œä¸æ˜¯rootï¼Œå¹¶æ·»åŠ ç¼“å­˜æ§åˆ¶
              NGINX_CONFIG="
              location /docs/ {
                  alias /srv/static/$PROJECT/;
                  index index.html;
                  try_files \$uri \$uri/ /docs/index.html;
                  
                  # ç¡®ä¿ä¸ç¼“å­˜HTMLæ–‡ä»¶
                  add_header Cache-Control \"no-cache, no-store, must-revalidate\" always;
                  add_header Pragma \"no-cache\" always;
                  add_header Expires \"0\" always;
              }
              
              # å¤„ç† /docs è·¯å¾„ï¼ˆä¸å¸¦æ–œæ ï¼‰- é‡å®šå‘åˆ° /docs/
              location = /docs {
                  return 301 /docs/;
              }"
            fi
            
            # å¦‚æœæä¾›äº†è‡ªå®šä¹‰é…ç½®ï¼Œä½¿ç”¨è‡ªå®šä¹‰é…ç½®
            if [ -n "${{ inputs.nginx_config }}" ]; then
              NGINX_CONFIG='${{ inputs.nginx_config }}'
              echo "ğŸ“ ä½¿ç”¨è‡ªå®šä¹‰é…ç½®"
            else
              echo "ğŸ“ ä½¿ç”¨é»˜è®¤é…ç½®"
              # ç¡®ä¿é»˜è®¤é…ç½®å°±æ˜¯å®Œæ•´çš„é…ç½®ï¼ŒåŒ…å«ç¼“å­˜æ§åˆ¶å’Œé‡å®šå‘
            fi
            
            echo "ğŸ“„ æ–°é…ç½®å†…å®¹:"
            echo "$NGINX_CONFIG"
            
            # å†™å…¥æ–°é…ç½®
            echo "$NGINX_CONFIG" | sudo tee "$ROUTE_CONF"
            
            # éªŒè¯é…ç½®æ–‡ä»¶æ˜¯å¦å†™å…¥æˆåŠŸ
            echo "ğŸ“„ å†™å…¥åçš„é…ç½®æ–‡ä»¶å†…å®¹:"
            cat "$ROUTE_CONF"
            
            # æ˜¾ç¤ºé…ç½®æ‘˜è¦
            echo "ğŸ“‹ é…ç½®æ‘˜è¦:"
            echo "- é¡¹ç›®: $PROJECT"
            echo "- é…ç½®æ–‡ä»¶: $ROUTE_CONF"
            echo "- é…ç½®ç±»å‹: $(if [ -n "${{ inputs.nginx_config }}" ]; then echo 'è‡ªå®šä¹‰é…ç½®'; else echo 'é»˜è®¤é…ç½®'; fi)"
            echo "- éƒ¨ç½²ç±»å‹: $DEPLOY_TYPE"
            
            # æ£€æŸ¥é…ç½®è¯­æ³•
            echo "ğŸ” æ£€æŸ¥Nginxé…ç½®è¯­æ³•..."
            if sudo nginx -t; then
              echo "âœ… Nginxé…ç½®è¯­æ³•æ­£ç¡®"
              sudo systemctl reload nginx
              echo "âœ… Nginxé…ç½®å®Œæˆå¹¶é‡æ–°åŠ è½½"
            else
              echo "âŒ Nginxé…ç½®è¯­æ³•é”™è¯¯"
              exit 1
            fi

      - name: è®¾ç½®è¾“å‡º
        id: set-outputs
        run: |
          echo "config_success=true" >> $GITHUB_OUTPUT
          echo "âœ… é…ç½®å®Œæˆ"

  start-service:
    needs: [deploy-project]
    if: ${{ inputs.start_cmd != '' && inputs.deploy_type == 'backend' }}
    runs-on: ubuntu-latest
    outputs:
      start_success: ${{ steps.set-outputs.outputs.start_success }}
    
    steps:
      - name: å¯åŠ¨æœåŠ¡
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ inputs.server_host }}
          username: ${{ inputs.server_user }}
          key: ${{ inputs.server_key }}
          port: ${{ inputs.server_port }}
          script: |
            echo "ğŸš€ å¯åŠ¨æœåŠ¡..."
            
            PROJECT="${{ inputs.project }}"
            START_CMD="${{ inputs.start_cmd }}"
            APPS_ROOT="/srv/apps"
            
            # åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•
            cd "$APPS_ROOT/$PROJECT"
            
            # æ‰§è¡Œå¯åŠ¨å‘½ä»¤
            echo "ğŸ“‹ æ‰§è¡Œå¯åŠ¨å‘½ä»¤: $START_CMD"
            $START_CMD
            
            # ç­‰å¾…æœåŠ¡å¯åŠ¨
            sleep 5
            
            echo "âœ… æœåŠ¡å¯åŠ¨å®Œæˆ"

      - name: è®¾ç½®è¾“å‡º
        id: set-outputs
        run: |
          echo "start_success=true" >> $GITHUB_OUTPUT
          echo "âœ… å¯åŠ¨å®Œæˆ"

  test-website:
    needs: [deploy-project, configure-nginx, start-service]
    if: always()
    runs-on: ubuntu-latest
    outputs:
      test_success: ${{ steps.set-outputs.outputs.test_success }}
    
    steps:
      - name: æµ‹è¯•ç½‘ç«™å¯è®¿é—®æ€§
        run: |
          echo "ğŸ” æµ‹è¯•ç½‘ç«™å¯è®¿é—®æ€§..."
          
          # ç­‰å¾…ä¸€æ®µæ—¶é—´è®©æœåŠ¡å®Œå…¨å¯åŠ¨
          sleep 10
          
          # æµ‹è¯•ç½‘ç«™å¯è®¿é—®æ€§
          if curl -f -s -o /dev/null -w "%{http_code}" https://redamancy.com.cn/docs/ | grep -q "200\|301\|302"; then
            echo "âœ… ç½‘ç«™å¯æ­£å¸¸è®¿é—®"
          else
            echo "âŒ ç½‘ç«™æ— æ³•è®¿é—®ï¼ŒHTTPçŠ¶æ€ç : $(curl -f -s -o /dev/null -w "%{http_code}" https://redamancy.com.cn/docs/)"
            echo "âš ï¸ è¿™å¯èƒ½æ˜¯å› ä¸º Nginx é…ç½®é—®é¢˜æˆ–æœåŠ¡æœªå®Œå…¨å¯åŠ¨"
          fi

      - name: è®¾ç½®è¾“å‡º
        id: set-outputs
        run: |
          echo "test_success=true" >> $GITHUB_OUTPUT
          echo "âœ… æµ‹è¯•å®Œæˆ"



  deployment-summary:
    needs: [download-artifact, upload-files, deploy-project, configure-nginx, start-service, test-website]
    if: always()
    runs-on: ubuntu-latest
    steps:
      - name: éƒ¨ç½²å®Œæˆæ€»ç»“
        run: |
          echo "ğŸ‰ éƒ¨ç½²æµç¨‹å®Œæˆ"
          echo "=========================================="
          echo "ğŸ“‹ éƒ¨ç½²ä¿¡æ¯:"
          echo "- é¡¹ç›®: ${{ inputs.project }}"
          echo "- éƒ¨ç½²ç±»å‹: ${{ inputs.deploy_type }}"
          echo "- æºä»“åº“: ${{ inputs.source_repo }}"
          echo "- æ„å»ºID: ${{ inputs.run_id }}"
          echo ""
          echo "ğŸ“Š æ‰§è¡ŒçŠ¶æ€:"
          echo "- ä¸‹è½½æ„å»ºäº§ç‰©: ${{ needs.download-artifact.result }}"
          echo "- ä¸Šä¼ æ–‡ä»¶: ${{ needs.upload-files.result }}"
          echo "- éƒ¨ç½²é¡¹ç›®: ${{ needs.deploy-project.result }}"
          echo "- é…ç½®Nginx: ${{ needs.configure-nginx.result || 'skipped' }}"
          echo "- å¯åŠ¨æœåŠ¡: ${{ needs.start-service.result || 'skipped' }}"
          echo "- æµ‹è¯•ç½‘ç«™: ${{ needs.test-website.result || 'skipped' }}"
          echo ""
          echo "ğŸ”— è®¿é—®ä¿¡æ¯:"
          echo "- åŸŸå: redamancy.com.cn"
          echo "- é¡¹ç›®è·¯å¾„: ${{ needs.deploy-project.outputs.deploy_path }}"
          echo "- è®¿é—®URL: https://redamancy.com.cn/docs/"
          echo ""
          echo "ğŸ“ éƒ¨ç½²å®Œæˆé€šçŸ¥:"
          echo "âœ… é¡¹ç›® ${{ inputs.project }} å·²æˆåŠŸéƒ¨ç½²åˆ°æœåŠ¡å™¨"
          echo "ğŸŒ å¯é€šè¿‡ https://redamancy.com.cn/docs/ è®¿é—®"
          echo "=========================================="